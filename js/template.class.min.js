if(typeof Object.assign!="function"){(function(){Object.assign=function(e){if(e===undefined||e===null){throw new TypeError("Cannot convert undefined or null to object")}var b=Object(e);for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d!==undefined&&d!==null){for(var a in d){if(d.hasOwnProperty(a)){b[a]=d[a]}}}}return b}})()}var Template=function(e,b){this._sTemplate=e;this._aNeed=[];this._aPattern=(typeof(b)!="undefined"&&b.length==2)?b:["[:",":]"];var a=new RegExp(this.clean(this._aPattern[0])+"(.*?)"+this.clean(this._aPattern[1]),"g"),g=e.match(a),d=0,f="",c=g.length;for(;d<c;d++){f=g[d].split(this._aPattern[0]).join("");f=f.split(this._aPattern[1]).join("");this._aNeed.push(f.toLowerCase())}};Template.prototype.treatObjet=function(a,e,d){var c;for(var b in e){if(typeof(e[b])=="object"){c=(a!=="")?a+"."+b:b;this.treatObjet(c,e[b],e);delete d[b]}else{c=(a!=="")?a+"."+b:b;d[c]=e[b]}}};Template.prototype.clean=function(a){return a.replace(/\\/g,"\\\\").replace(/\[/g,"\\[").replace(/\?/g,"\\?").replace(/\!/g,"\\!").replace(/\*/g,"\\*").replace(/\]/g,"\\]")};Template.prototype.compute=function(g,d){d=d||{};var f=JSON.parse(JSON.stringify(g)),e=Object.assign({},d),a=this._sTemplate,h="",j="",k="",c=0,b=this._aNeed.length;this.treatObjet("",f,{});this.treatObjet("",e,{});for(;c<b;c++){j=this._aNeed[c];if(e[j]&&(typeof e[j]=="function")){k=f[j]||null;h=e[j].call(g,k)}else{h=f[j]}a=a.split(this._aPattern[0]+j.toUpperCase()+this._aPattern[1]).join(h)}return a};
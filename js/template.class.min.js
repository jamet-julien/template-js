"function"!=typeof Object.assign&&!function(){Object.assign=function(t){"use strict";if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var a=arguments[n];if(void 0!==a&&null!==a)for(var r in a)a.hasOwnProperty(r)&&(e[r]=a[r])}return e}}();var Template=function(t,e){this._sTemplate=t,this._aNeed=[],this._aPattern="undefined"!=typeof e&&2==e.length?e:["[:",":]"];for(var n=new RegExp(this.clean(this._aPattern[0])+"(.*?)"+this.clean(this._aPattern[1]),"g"),a=t.match(n),r=0,i="",o=a.length;r<o;r++)i=a[r].split(this._aPattern[0]).join(""),i=i.split(this._aPattern[1]).join(""),this._aNeed.push(i.toLowerCase())};Template.prototype.treatObjet=function(t,e,n){var a;for(var r in e)"object"==typeof e[r]?(a=""!==t?t+"."+r:r,this.treatObjet(a,e[r],e),delete n[r]):(a=""!==t?t+"."+r:r,n[a]=e[r])},Template.prototype.clean=function(t){return t.replace(/\\/g,"\\\\").replace(/\[/g,"\\[").replace(/\?/g,"\\?").replace(/\!/g,"\\!").replace(/\*/g,"\\*").replace(/\]/g,"\\]")},Template.prototype.compute=function(t,e){e=e||{};var n=JSON.parse(JSON.stringify(t)),a=Object.assign({},e),r=this._sTemplate,i="",o="",s="",p=0,l=this._aNeed.length;for(this.treatObjet("",n,{}),this.treatObjet("",a,{});p<l;p++)o=this._aNeed[p],a[o]&&"function"==typeof a[o]?(s=n[o]||null,i=a[o].call(t,s)):i="undefined"==typeof n[o]?"":n[o],r=r.split(this._aPattern[0]+o.toUpperCase()+this._aPattern[1]).join(i);return r};
